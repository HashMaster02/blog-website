---
import Layout from "../layouts/default.astro";
import Album from "../components/Album.astro";
import AlbumShelf from "../components/AlbumShelf.astro";
import { albums } from "../data/album-data";
import SinglesList from "../components/SinglesList.astro";
import { getCollection } from "astro:content";
import { sortDateAscending } from "../utils/sorting";

let singles = (await getCollection("singles")).sort(sortDateAscending);
---

<Layout>
  <AlbumShelf title="Albums">
    {
      albums.map((album) => {
        return (
          <Album
            albumTitle={album.title}
            cover={album.cover}
            year={album.year}
            type={album.type}
            href={album.slug}
          />
        );
      })
    }
  </AlbumShelf>
  <AlbumShelf title="Featured Singles">
    <SinglesList
      posts={singles}
      showFeatured={true}
      featured={true}
      hrefBase="/singles"
    />
  </AlbumShelf>
</Layout>
